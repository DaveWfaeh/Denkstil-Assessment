<!DOCTYPE html>
<html lang="de">
<head>
  <script>
  function notifyParent() {
    window.parent.postMessage({
      frameHeight: document.body.scrollHeight,
      scrollToTop: true
    }, '*');
  }

  window.addEventListener('load', notifyParent);

  // HÃ¶he auch bei FenstergrÃ¶ÃŸenÃ¤nderung aktualisieren
  var observer = new ResizeObserver(function() {
    window.parent.postMessage({
      frameHeight: document.body.scrollHeight
    }, '*');
  });
  observer.observe(document.body);
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Denkstil-Assessment</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f6fa;
    --surface: #ffffff;
    --card: #ffffff;
    --border: #e0e3ef;
    --text: #111111;
    --muted: #444444;
    --A: #2680c2;
    --B: #1a9e6e;
    --C: #c45a20;
    --D: #9030c0;
    --accent: #c8960a;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* subtle light background texture */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: radial-gradient(circle at 15% 15%, rgba(38,128,194,0.05) 0%, transparent 50%),
                      radial-gradient(circle at 85% 85%, rgba(144,48,192,0.04) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 860px;
    margin: 0 auto;
    padding: 2rem 1.5rem;
    position: relative;
    z-index: 1;
  }

  /* HEADER */
  header {
    text-align: center;
    margin-bottom: 3rem;
    padding-top: 2rem;
  }
  .logo-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.2rem;
    margin-bottom: 1.2rem;
  }
  .quadrant-badges {
    display: flex;
    gap: 6px;
  }
  .qb {
    width: 28px; height: 28px;
    border-radius: 6px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 600; font-size: 13px;
  }
  .qb-A { background: rgba(78,168,224,0.2); color: var(--A); border: 1px solid var(--A); }
  .qb-B { background: rgba(78,201,148,0.2); color: var(--B); border: 1px solid var(--B); }
  .qb-C { background: rgba(224,123,78,0.2); color: var(--C); border: 1px solid var(--C); }
  .qb-D { background: rgba(196,78,224,0.2); color: var(--D); border: 1px solid var(--D); }

  header h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(2rem, 5vw, 3.2rem);
    letter-spacing: -0.5px;
    line-height: 1.1;
    color: #1a1c2a;
  }
  header h1 em {
    color: var(--accent);
    font-style: italic;
  }
  header h1 em {
    color: var(--accent);
    font-style: italic;
  }
  header p {
    color: var(--muted);
    margin-top: 0.8rem;
    font-size: 0.95rem;
    max-width: 480px;
    margin-left: auto; margin-right: auto;
    line-height: 1.6;
  }

  /* PROGRESS */
  .progress-wrap {
    margin-bottom: 2.5rem;
  }
  .progress-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }
  .progress-label { font-size: 0.85rem; color: #111111; }
  .progress-count { font-size: 0.85rem; font-weight: 600; color: var(--accent); }
  .progress-bar-bg {
    height: 5px; border-radius: 99px;
    background: var(--border);
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--A), var(--D));
    border-radius: 99px;
    transition: width 0.4s ease;
  }

  /* SECTION */
  .section-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .section-badge {
    padding: 0.3rem 0.9rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }
  .section-title {
    font-family: 'DM Serif Display', serif;
    font-size: 1.4rem;
  }

  /* QUESTION CARD */
  .question-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }
  .question-card:hover { border-color: #c0c8e0; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
  .question-text {
    font-size: 0.97rem;
    line-height: 1.6;
    margin-bottom: 1.1rem;
    color: var(--text);
  }
  .q-num {
    font-size: 0.75rem;
    font-weight: 600;
    color: #111111;
    margin-bottom: 0.4rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  /* LIKERT SCALE */
  .likert {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .likert input[type="radio"] { display: none; }
  .likert label {
    flex: 1;
    min-width: 44px;
    text-align: center;
    padding: 0.55rem 0.3rem;
    border-radius: 8px;
    border: 1px solid var(--border);
    cursor: pointer;
    font-size: 0.82rem;
    font-weight: 500;
    color: var(--muted);
    transition: all 0.15s;
    background: #f8f9fc;
  }
  .likert label:hover { border-color: var(--accent); color: var(--accent); background: #fefaf0; }
  .likert input[type="radio"]:checked + label {
    background: var(--accent);
    border-color: var(--accent);
    color: #ffffff;
    font-weight: 600;
  }
  .likert-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 0.4rem;
    font-size: 0.72rem;
    color: #111111;
    padding: 0 2px;
  }

  /* BUTTONS */
  .btn-row {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
    justify-content: flex-end;
  }
  .btn {
    padding: 0.8rem 2rem;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    transition: all 0.2s;
  }
  .btn-primary {
    background: var(--accent);
    color: #ffffff;
  }
  .btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }
  .btn-primary:disabled { opacity: 0.3; cursor: not-allowed; transform: none; }
  .btn-secondary {
    background: transparent;
    color: #111111;
    border: 1px solid var(--border);
  }
  .btn-secondary:hover { color: #111111; border-color: #aaaaaa; }

  /* RESULTS */
  #results { display: none; }
  .results-header {
    text-align: center;
    margin-bottom: 3rem;
  }
  .results-header h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 2.2rem;
    margin-bottom: 0.5rem;
  }

  /* SCORE BARS */
  .score-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 2.5rem;
  }
  @media (max-width: 500px) { .score-grid { grid-template-columns: 1fr; } }
  .score-card {
    background: var(--card);
    border-radius: 14px;
    padding: 1.4rem 1.6rem;
    border: 1px solid var(--border);
  }
  .score-card-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.8rem;
  }
  .score-label {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
    font-size: 1rem;
  }
  .score-dot {
    width: 12px; height: 12px;
    border-radius: 50%;
  }
  .score-value {
    font-family: 'DM Serif Display', serif;
    font-size: 1.8rem;
    line-height: 1;
  }
  .score-desc {
    font-size: 0.8rem;
    color: #111111;
    line-height: 1.5;
    margin-top: 0.4rem;
  }
  .score-bar-bg { height: 6px; border-radius: 99px; background: var(--border); margin-top: 0.8rem; overflow: hidden; }
  .score-bar-fill { height: 100%; border-radius: 99px; transition: width 1s ease; }

  /* SPIDER CHART */
  .spider-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 2rem;
    margin-bottom: 2.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 2px 12px rgba(0,0,0,0.07);
  }
  .spider-title {
    font-family: 'DM Serif Display', serif;
    font-size: 1.3rem;
    margin-bottom: 1.5rem;
    align-self: flex-start;
  }
  canvas#spiderCanvas {
    max-width: 420px;
    width: 100%;
    height: auto;
  }

  /* PROFILE */
  .profile-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 2rem;
    margin-bottom: 2.5rem;
  }
  .profile-title {
    font-family: 'DM Serif Display', serif;
    font-size: 1.3rem;
    margin-bottom: 1rem;
  }
  .dominant-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1.2rem;
    border-radius: 30px;
    font-weight: 700;
    font-size: 1rem;
    margin-bottom: 1rem;
  }
  .profile-text {
    font-size: 0.93rem;
    line-height: 1.7;
    color: #111111;
  }
  .trait-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
  }
  .trait-tag {
    padding: 0.3rem 0.8rem;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  /* QUADRANT MAP */
  .quadrant-map {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2px;
    border-radius: 18px;
    overflow: hidden;
    margin-bottom: 2.5rem;
  }
  .quadrant-box {
    padding: 1.5rem;
    position: relative;
  }
  .qbox-label {
    font-size: 0.72rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 0.3rem;
    opacity: 0.7;
  }
  .qbox-name {
    font-family: 'DM Serif Display', serif;
    font-size: 1.1rem;
    margin-bottom: 0.4rem;
  }
  .qbox-traits {
    font-size: 0.78rem;
    line-height: 1.6;
    color: #111111;
  }
  .qbox-score {
    position: absolute;
    top: 1rem; right: 1rem;
    font-family: 'DM Serif Display', serif;
    font-size: 1.5rem;
  }

  .restart-btn {
    display: block;
    width: 100%;
    padding: 1rem;
    border-radius: 12px;
    border: none;
    background: var(--accent);
    color: #ffffff;
    font-family: 'DM Sans', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: opacity 0.2s;
    margin-top: 1rem;
  }
  .restart-btn:hover { opacity: 0.85; }

  /* NAV DOTS */
  .section-nav {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 2.5rem;
  }
  .nav-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--border);
    transition: all 0.3s;
  }
  .nav-dot.active { background: var(--accent); transform: scale(1.4); }
  .nav-dot.done { background: var(--B); }

  /* COMPLIANCE BANNER */
  .compliance-banner {
    background: rgba(240,208,96,0.07);
    border: 1px solid rgba(200,150,10,0.25);
    border-radius: 12px;
    padding: 1rem 1.3rem;
    margin-bottom: 2rem;
    display: flex;
    gap: 0.8rem;
    align-items: flex-start;
  }
  .compliance-banner .cb-icon { font-size: 1.2rem; flex-shrink: 0; margin-top: 2px; }
  .compliance-banner p { font-size: 0.82rem; color: #111111; line-height: 1.6; }
  .compliance-banner strong { color: #111111; }

  .privacy-note {
    background: rgba(78,201,148,0.07);
    border: 1px solid rgba(26,158,110,0.2);
    border-radius: 12px;
    padding: 1rem 1.3rem;
    margin-bottom: 2rem;
    display: flex;
    gap: 0.8rem;
    align-items: flex-start;
  }
  .privacy-note p { font-size: 0.82rem; color: #111111; line-height: 1.6; }

  /* CONSENT */
  .consent-block {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.2rem 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    cursor: pointer;
    transition: border-color 0.2s;
  }
  .consent-block:hover { border-color: var(--accent); }
  .consent-block.checked { border-color: var(--B); background: rgba(78,201,148,0.06); }
  .consent-checkbox {
    width: 22px; height: 22px;
    border-radius: 6px;
    border: 2px solid var(--border);
    flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    font-size: 13px;
    transition: all 0.2s;
    margin-top: 1px;
    background: var(--surface);
  }
  .consent-block.checked .consent-checkbox {
    background: var(--B);
    border-color: var(--B);
    color: #0e0f14;
  }
  .consent-text { font-size: 0.85rem; color: #111111; line-height: 1.6; }
  .consent-text strong { color: #111111; }

  /* â”€â”€ PRINT / PDF STYLES â”€â”€ */
  @media print {
    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
    body { background: #fff !important; margin: 0; padding: 0; font-size: 11pt; }
    body::before { display: none; }
    .container { max-width: 100%; padding: 0; }
    #intro, #assessment { display: none !important; }
    #results { display: block !important; }
    .restart-btn, .no-print { display: none !important; }
    header { display: none; }

    .results-header { text-align: center; margin-bottom: 1.2rem; padding-top: 0; }
    .results-header h2 { font-size: 22pt; color: #111; }

    .print-header {
      display: flex !important;
      align-items: center;
      justify-content: space-between;
      border-bottom: 3px solid #2680c2;
      padding-bottom: 0.8rem;
      margin-bottom: 1.5rem;
    }
    .print-header h1 { font-size: 18pt; color: #111; }
    .print-header .print-date { font-size: 9pt; color: #666; }

    .score-grid {
      display: grid !important;
      grid-template-columns: 1fr 1fr 1fr 1fr !important;
      gap: 0.5rem;
      margin-bottom: 1.2rem;
    }
    .score-card {
      border-radius: 6px !important;
      padding: 0.6rem 0.8rem !important;
      box-shadow: none !important;
      border: 1px solid #ddd !important;
    }
    .score-value { font-size: 1.4rem !important; }

    .spider-section {
      border-radius: 8px !important;
      padding: 1rem !important;
      margin-bottom: 1rem !important;
      page-break-inside: avoid;
      box-shadow: none !important;
    }
    canvas#spiderCanvas { max-width: 300px !important; }

    .quadrant-map {
      margin-bottom: 1rem !important;
      page-break-inside: avoid;
    }
    .quadrant-box { padding: 0.8rem !important; }

    .profile-section {
      page-break-before: always;
      border: none !important;
      box-shadow: none !important;
      padding: 0 !important;
    }

    /* Each quadrant detail card */
    .profile-section > div > div[style*="border-left"] {
      page-break-inside: avoid;
      margin-bottom: 0.8rem !important;
    }

    .fade-in { animation: none !important; }
  }

  .fade-in { animation: fadeInUp 0.4s ease forwards; }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .print-header { display: none; }

  .intro-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 2rem;
    margin-bottom: 2rem;
    text-align: center;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
  }
  .quadrant-explain {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.8rem;
    margin-top: 1.5rem;
    text-align: left;
  }
  .qe-item {
    display: flex;
    align-items: flex-start;
    gap: 0.7rem;
    padding: 0.8rem;
    border-radius: 10px;
  }
  .qe-icon {
    width: 32px; height: 32px;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1rem;
    flex-shrink: 0;
  }
  .qe-item p { font-size: 0.8rem; color: #111111; line-height: 1.4; margin-top: 2px; }
  .qe-item strong { font-size: 0.88rem; display: block; margin-bottom: 2px; }
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo-row">
      <div class="quadrant-badges">
        <div class="qb qb-A">A</div>
        <div class="qb qb-B">B</div>
        <div class="qb qb-C">C</div>
        <div class="qb qb-D">D</div>
      </div>
    </div>
    <h1>Denkstil-<br><em>Assessment</em></h1>
    <p>Entdecke deinen bevorzugten Denkstil anhand des 4-Quadranten-Modells â€“ inspiriert von Ned Herrmanns Gehirnforschung.</p>
  </header>

  <div id="intro" class="fade-in">

    <!-- HERO INTRO -->
    <div style="background:linear-gradient(135deg,#f0f7ff 0%,#f5f0ff 100%);border:1px solid #dde0ef;border-radius:18px;padding:2.2rem;margin-bottom:1.5rem;text-align:center;box-shadow:0 2px 12px rgba(0,0,0,0.06);">
      <div style="font-size:2.2rem;margin-bottom:0.8rem;">ğŸ§ </div>
      <h2 style="font-family:'DM Serif Display',serif;font-size:1.6rem;color:#111;margin-bottom:0.8rem;line-height:1.3;">Warum denken wir so verschieden?</h2>
      <p style="font-size:0.95rem;color:#333;line-height:1.8;max-width:560px;margin:0 auto;">
        Jeder Mensch hat einen einzigartigen Denkstil. Manche lÃ¶sen Probleme mit Zahlen und Logik, andere mit GespÃ¼r und Intuition â€“ manche planen akribisch, andere denken in grossen Visionen. Keiner dieser Stile ist besser oder schlechter. Sie sind einfach <strong>verschieden</strong> â€“ und das Wissen darÃ¼ber verÃ¤ndert alles.
      </p>
    </div>

    <!-- WOFÃœR VERWENDEN -->
    <div style="background:#fff;border:1px solid #e0e3ef;border-radius:18px;padding:2rem;margin-bottom:1.5rem;box-shadow:0 2px 12px rgba(0,0,0,0.05);">
      <h3 style="font-family:'DM Serif Display',serif;font-size:1.3rem;color:#111;margin-bottom:1.2rem;">WofÃ¼r kannst du dieses Assessment nutzen?</h3>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">

        <div style="display:flex;gap:0.8rem;align-items:flex-start;padding:1rem;background:#f0f7ff;border-radius:12px;">
          <div style="font-size:1.4rem;flex-shrink:0;">ğŸ‘¤</div>
          <div>
            <strong style="font-size:0.9rem;color:#2680c2;display:block;margin-bottom:0.3rem;">Selbsterkenntnis</strong>
            <p style="font-size:0.82rem;color:#333;line-height:1.6;">Verstehe, wie du bevorzugt denkst, lernst und Entscheidungen triffst. Erkenne deine natÃ¼rlichen StÃ¤rken und Entwicklungspotenziale.</p>
          </div>
        </div>

        <div style="display:flex;gap:0.8rem;align-items:flex-start;padding:1rem;background:#f0fff8;border-radius:12px;">
          <div style="font-size:1.4rem;flex-shrink:0;">ğŸ¤</div>
          <div>
            <strong style="font-size:0.9rem;color:#1a9e6e;display:block;margin-bottom:0.3rem;">Teamdynamik verbessern</strong>
            <p style="font-size:0.82rem;color:#333;line-height:1.6;">Verstehe warum Kollegen anders reagieren als du. Nutze Denkstil-Vielfalt im Team bewusst als StÃ¤rke statt als Reibungspunkt.</p>
          </div>
        </div>

        <div style="display:flex;gap:0.8rem;align-items:flex-start;padding:1rem;background:#fff8f0;border-radius:12px;">
          <div style="font-size:1.4rem;flex-shrink:0;">ğŸ¯</div>
          <div>
            <strong style="font-size:0.9rem;color:#c45a20;display:block;margin-bottom:0.3rem;">Karriere & Berufswahl</strong>
            <p style="font-size:0.82rem;color:#333;line-height:1.6;">Finde heraus, welche Berufsfelder und Rollen am besten zu deinem Denkstil passen â€“ und wo du am meisten Energie verlierst.</p>
          </div>
        </div>

        <div style="display:flex;gap:0.8rem;align-items:flex-start;padding:1rem;background:#f8f0ff;border-radius:12px;">
          <div style="font-size:1.4rem;flex-shrink:0;">ğŸ’¬</div>
          <div>
            <strong style="font-size:0.9rem;color:#9030c0;display:block;margin-bottom:0.3rem;">Kommunikation anpassen</strong>
            <p style="font-size:0.82rem;color:#333;line-height:1.6;">Lerne, wie du andere Denkstile gezielt ansprechen und Ã¼berzeugen kannst â€“ im Meeting, im Verkauf oder im Alltag.</p>
          </div>
        </div>

        <div style="display:flex;gap:0.8rem;align-items:flex-start;padding:1rem;background:#f0f7ff;border-radius:12px;">
          <div style="font-size:1.4rem;flex-shrink:0;">ğŸ«</div>
          <div>
            <strong style="font-size:0.9rem;color:#2680c2;display:block;margin-bottom:0.3rem;">Lernen & Weiterbildung</strong>
            <p style="font-size:0.82rem;color:#333;line-height:1.6;">Entdecke, wie du am effektivsten lernst â€“ ob durch Fakten, Strukturen, Austausch oder kreatives Ausprobieren.</p>
          </div>
        </div>

        <div style="display:flex;gap:0.8rem;align-items:flex-start;padding:1rem;background:#f0fff8;border-radius:12px;">
          <div style="font-size:1.4rem;flex-shrink:0;">ğŸ§©</div>
          <div>
            <strong style="font-size:0.9rem;color:#1a9e6e;display:block;margin-bottom:0.3rem;">FÃ¼hrung & Coaching</strong>
            <p style="font-size:0.82rem;color:#333;line-height:1.6;">Als FÃ¼hrungskraft erkennst du, wie du Mitarbeitende mit unterschiedlichen Denkstilen motivierst, fÃ¶rderst und richtig einsetzt.</p>
          </div>
        </div>

      </div>
    </div>

    <!-- DAS MODELL -->
    <div style="background:#fff;border:1px solid #e0e3ef;border-radius:18px;padding:2rem;margin-bottom:1.5rem;box-shadow:0 2px 12px rgba(0,0,0,0.05);">
      <h3 style="font-family:'DM Serif Display',serif;font-size:1.3rem;color:#111;margin-bottom:0.6rem;">Das 4-Quadranten-Modell</h3>
      <p style="font-size:0.85rem;color:#444;line-height:1.7;margin-bottom:1.2rem;">
        Entwickelt von <strong>Ned Herrmann</strong> in den 1970er-Jahren basiert das Modell auf Erkenntnissen der Gehirnforschung. Es beschreibt vier unterschiedliche DenkprÃ¤ferenzen â€“ jeder Mensch nutzt alle vier, hat aber individuelle Vorlieben:
      </p>
      <div class="quadrant-explain">
        <div class="qe-item" style="background:rgba(38,128,194,0.07);">
          <div class="qe-icon" style="background:rgba(38,128,194,0.15);color:var(--A);">ğŸ”¬</div>
          <div><strong style="color:var(--A);">A â€“ Analytisch</strong><p>Logisch, faktenbasiert, quantitativ, technisch, rational, kritisch</p></div>
        </div>
        <div class="qe-item" style="background:rgba(26,158,110,0.07);">
          <div class="qe-icon" style="background:rgba(26,158,110,0.15);color:var(--B);">ğŸ“‹</div>
          <div><strong style="color:var(--B);">B â€“ Organisiert</strong><p>Strukturiert, sequenziell, detailorientiert, geplant, zuverlÃ¤ssig</p></div>
        </div>
        <div class="qe-item" style="background:rgba(196,90,32,0.07);">
          <div class="qe-icon" style="background:rgba(196,90,32,0.15);color:var(--C);">ğŸ¤</div>
          <div><strong style="color:var(--C);">C â€“ Sozial</strong><p>Kommunikativ, empathisch, teamorientiert, interpersonal, gefÃ¼hlsorientiert</p></div>
        </div>
        <div class="qe-item" style="background:rgba(144,48,192,0.07);">
          <div class="qe-icon" style="background:rgba(144,48,192,0.15);color:var(--D);">ğŸ’¡</div>
          <div><strong style="color:var(--D);">D â€“ Kreativ</strong><p>Ganzheitlich, intuitiv, innovativ, zukunftsorientiert, visionÃ¤r</p></div>
        </div>
      </div>
    </div>

    <!-- SO GEHTS -->
    <div style="background:#fff;border:1px solid #e0e3ef;border-radius:18px;padding:1.5rem 2rem;margin-bottom:1.5rem;box-shadow:0 2px 12px rgba(0,0,0,0.05);">
      <h3 style="font-family:'DM Serif Display',serif;font-size:1.1rem;color:#111;margin-bottom:1rem;">So funktioniert das Assessment</h3>
      <div style="display:flex;flex-direction:column;gap:0.7rem;">
        <div style="display:flex;gap:0.8rem;align-items:center;">
          <div style="width:28px;height:28px;border-radius:50%;background:#2680c2;color:#fff;font-weight:700;font-size:0.85rem;display:flex;align-items:center;justify-content:center;flex-shrink:0;">1</div>
          <p style="font-size:0.88rem;color:#333;line-height:1.5;"><strong>40 Aussagen</strong> â€“ beantworte jede auf einer Skala von 1 (trifft gar nicht zu) bis 5 (trifft voll zu)</p>
        </div>
        <div style="display:flex;gap:0.8rem;align-items:center;">
          <div style="width:28px;height:28px;border-radius:50%;background:#2680c2;color:#fff;font-weight:700;font-size:0.85rem;display:flex;align-items:center;justify-content:center;flex-shrink:0;">2</div>
          <p style="font-size:0.88rem;color:#333;line-height:1.5;"><strong>Antworte intuitiv</strong> â€“ es gibt keine richtigen oder falschen Antworten, denke nicht zu lange nach</p>
        </div>
        <div style="display:flex;gap:0.8rem;align-items:center;">
          <div style="width:28px;height:28px;border-radius:50%;background:#2680c2;color:#fff;font-weight:700;font-size:0.85rem;display:flex;align-items:center;justify-content:center;flex-shrink:0;">3</div>
          <p style="font-size:0.88rem;color:#333;line-height:1.5;"><strong>Dauer ca. 10â€“15 Minuten</strong> â€“ am Ende erhÃ¤ltst du ein ausfÃ¼hrliches Profil mit Spinnendiagramm als PDF</p>
        </div>
      </div>
    </div>

    <!-- COMPLIANCE BANNER -->
    <div class="compliance-banner">
      <div class="cb-icon">âš ï¸</div>
      <p><strong>Hinweis:</strong> Dieses Tool ist ein <strong>informelles Selbstreflexions-Instrument</strong> zur persÃ¶nlichen Orientierung. Es basiert auf dem 4-Quadranten-Denkmodell, ist jedoch <strong>keine offizielle Diagnose</strong> und kein zertifiziertes psychologisches Testverfahren. Die Ergebnisse ersetzen keine professionelle Beratung oder Coaching. HBDIÂ® ist eine eingetragene Marke von Herrmann International â€“ dieses Tool ist eine eigenstÃ¤ndige, unabhÃ¤ngige Umsetzung.</p>
    </div>

    <!-- PRIVACY NOTE -->
    <div class="privacy-note">
      <div class="cb-icon">ğŸ”’</div>
      <p><strong style="color:#1a9e6e">Datenschutz:</strong> Dieses Assessment lÃ¤uft vollstÃ¤ndig in deinem Browser. Es werden <strong style="color:#1a9e6e">keine personenbezogenen Daten gespeichert, Ã¼bertragen oder verarbeitet</strong>. Deine Antworten verlassen deinen Computer zu keiner Zeit. Es werden keine Cookies gesetzt und kein Tracking durchgefÃ¼hrt.</p>
    </div>

    <!-- CONSENT CHECKBOX -->
    <div class="consent-block" id="consentBlock">
      <input type="checkbox" id="consentCheck" onchange="toggleConsent(this)"
        style="width:20px;height:20px;cursor:pointer;accent-color:#4ec994;flex-shrink:0;margin-top:2px;">
      <label for="consentCheck" class="consent-text" style="cursor:pointer;">
        <strong>Ich habe die Hinweise gelesen und verstanden.</strong><br>
        Mir ist bewusst, dass dieses Tool zur Selbstreflexion dient und keine professionelle Diagnose ersetzt. Ich bin damit einverstanden, dass meine Antworten ausschlieÃŸlich lokal in meinem Browser verarbeitet werden und nicht gespeichert oder Ã¼bertragen werden.
      </label>
    </div>

    <div class="btn-row" style="justify-content:center;">
      <button class="btn btn-primary" id="startBtn" onclick="startAssessment()" disabled style="padding:1rem 3rem;font-size:1rem;">Assessment starten â†’</button>
    </div>

    <!-- FOOTER LEGAL -->
    <p style="text-align:center;font-size:0.75rem;color:var(--muted);margin-top:1.5rem;line-height:1.6;">
      Dieses Tool ist inspiriert vom Herrmann Brain Dominance Model. HBDIÂ® ist eine eingetragene Marke von Herrmann International.<br>
      Diese Umsetzung steht in keiner Verbindung zu Herrmann International.
    </p>
  </div>

  <!-- ASSESSMENT -->
  <div id="assessment" style="display:none;">
    <div class="progress-wrap">
      <div class="progress-meta">
        <span class="progress-label">Fortschritt</span>
        <span class="progress-count" id="progressCount">0 / 0</span>
      </div>
      <div class="progress-bar-bg">
        <div class="progress-bar-fill" id="progressFill" style="width:0%"></div>
      </div>
    </div>

    <div class="section-nav" id="sectionNav"></div>

    <div id="questionSection" class="fade-in"></div>

    <div class="btn-row">
      <button class="btn btn-secondary" id="btnPrev" onclick="prevSection()">â† ZurÃ¼ck</button>
      <button class="btn btn-primary" id="btnNext" onclick="nextSection()">Weiter â†’</button>
    </div>
  </div>

  <!-- RESULTS -->
  <div id="results" class="fade-in">

    <!-- Nur im Druck sichtbar -->
    <div class="print-header" id="printHeader">
      <div>
        <div style="font-size:9pt;color:#888;text-transform:uppercase;letter-spacing:0.08em;margin-bottom:2px;">Denkstil-Assessment</div>
        <h1 style="font-family:'DM Serif Display',serif;font-size:20pt;color:#111;margin:0;">PersÃ¶nliches Denkstil-Profil</h1>
      </div>
      <div class="print-date" id="printDate" style="text-align:right;font-size:9pt;color:#666;"></div>
    </div>

    <div class="results-header">
      <p style="color:var(--muted);font-size:0.85rem;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.5rem;">Dein Ergebnis</p>
      <h2>Denkstil-Profil</h2>
    </div>

    <div class="score-grid" id="scoreGrid"></div>

    <div class="spider-section">
      <div class="spider-title">Denkstil-Spinnendiagramm</div>
      <canvas id="spiderCanvas" width="420" height="420"></canvas>
    </div>

    <div class="quadrant-map" id="quadrantMap"></div>

    <div class="profile-section" id="profileSection"></div>

    <div style="display:flex;gap:1rem;margin-top:1.5rem;">
      <button class="restart-btn" onclick="restart()" style="flex:1;">ğŸ”„ Neu starten</button>
      <button class="restart-btn" onclick="printResults()" style="flex:1;background:#2680c2;">ğŸ–¨ï¸ Als PDF speichern</button>
    </div>

    <div style="margin-top:2rem;padding:1.2rem;background:var(--card);border:1px solid var(--border);border-radius:12px;">
      <p style="font-size:0.78rem;color:var(--muted);line-height:1.7;text-align:center;">
        âš ï¸ <strong style="color:var(--text)">Hinweis:</strong> Dieses Ergebnis dient ausschlieÃŸlich zur persÃ¶nlichen Selbstreflexion und Orientierung. Es handelt sich um kein zertifiziertes psychologisches Testverfahren und ersetzt keine professionelle Beratung. Alle Daten wurden ausschlieÃŸlich lokal in deinem Browser verarbeitet und wurden weder gespeichert noch Ã¼bertragen.<br><br>
        Inspiriert vom Herrmann Brain Dominance Instrument. HBDIÂ® ist eine eingetragene Marke von Herrmann International. Diese Anwendung steht in keiner Verbindung zu Herrmann International.
      </p>
    </div>
  </div>
</div>

<script>
let consentGiven = false;
function toggleConsent(checkbox) {
  consentGiven = checkbox.checked;
  const block = document.getElementById('consentBlock');
  const btn = document.getElementById('startBtn');
  block.classList.toggle('checked', consentGiven);
  btn.disabled = !consentGiven;
}

 // HBDI QUESTIONS â€” 40 questions, 10 per quadrant
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const sections = [
  {
    id: 'A',
    name: 'Analytisches Denken',
    color: '#4ea8e0',
    icon: 'ğŸ”¬',
    questions: [
      'Ich lÃ¶se Probleme bevorzugt durch logische Analyse und faktenbasiertes Denken.',
      'Ich verlasse mich beim Entscheiden hauptsÃ¤chlich auf Daten und Zahlen.',
      'Mathematische oder technische Aufgaben liegen mir gut.',
      'Ich schÃ¤tze ObjektivitÃ¤t und vermeide es, Entscheidungen von Emotionen leiten zu lassen.',
      'Ich beschÃ¤ftige mich gerne mit komplexen theoretischen Fragestellungen.',
      'Ich Ã¼berprÃ¼fe Argumente kritisch, bevor ich ihnen zustimme.',
      'Beim Lernen bevorzuge ich logische, systematische ErklÃ¤rungen.',
      'Ich finde Freude daran, abstrakte Konzepte durchzudenken.',
      'In Diskussionen argumentiere ich vorrangig mit Fakten und Beweisen.',
      'Ich bevorzuge Aufgaben, bei denen ich Hypothesen aufstellen und testen kann.',
    ]
  },
  {
    id: 'B',
    name: 'Organisiertes Denken',
    color: '#4ec994',
    icon: 'ğŸ“‹',
    questions: [
      'Ich plane meine Arbeit detailliert und halte mich an Strukturen und PlÃ¤ne.',
      'Ich bevorzuge klare Regeln, Verfahren und Standards.',
      'Ich mag es, Aufgaben Schritt fÃ¼r Schritt in einer festgelegten Reihenfolge abzuarbeiten.',
      'Ordnung und Sauberkeit sind mir bei der Arbeit sehr wichtig.',
      'Ich beachte Details und stelle sicher, dass keine Fehler auftreten.',
      'Ich erledige Aufgaben pÃ¼nktlich und halte Fristen konsequent ein.',
      'Ich fÃ¼hle mich unwohl, wenn PlÃ¤ne spontan geÃ¤ndert werden.',
      'Ich verwalte gerne Informationen in geordneten Listen oder Dateisystemen.',
      'ZuverlÃ¤ssigkeit und BestÃ¤ndigkeit sind fÃ¼r mich wichtige Werte bei der Arbeit.',
      'Ich dokumentiere meine Arbeitsprozesse sorgfÃ¤ltig.',
    ]
  },
  {
    id: 'C',
    name: 'Soziales Denken',
    color: '#e07b4e',
    icon: 'ğŸ¤',
    questions: [
      'Im Team zu arbeiten macht mir deutlich mehr SpaÃŸ als alleine zu arbeiten.',
      'Ich achte sehr auf die GefÃ¼hle und BedÃ¼rfnisse anderer Menschen.',
      'Ich kommuniziere offen und spreche auch persÃ¶nliche Themen an.',
      'Ich bin hÃ¤ufig derjenige, der Konflikte im Team vermittelt und lÃ¶st.',
      'Feedback und WertschÃ¤tzung aus meinem Umfeld sind mir sehr wichtig.',
      'Ich lerne am besten durch Austausch und GesprÃ¤che mit anderen.',
      'Mir liegt das Wohlbefinden meiner Kollegen oder Mitmenschen am Herzen.',
      'Ich bevorzuge kooperative LÃ¶sungsansÃ¤tze gegenÃ¼ber Konkurrenz.',
      'Ich engagiere mich gerne in sozialen Projekten oder GemeinschaftsaktivitÃ¤ten.',
      'PersÃ¶nliche Beziehungen spielen bei meinen beruflichen Entscheidungen eine groÃŸe Rolle.',
    ]
  },
  {
    id: 'D',
    name: 'Kreatives Denken',
    color: '#c44ee0',
    icon: 'ğŸ’¡',
    questions: [
      'Ich denke oft in Bildern, Metaphern oder ganzheitlichen Konzepten.',
      'Neue und ungewÃ¶hnliche Ideen faszinieren mich mehr als bewÃ¤hrte Methoden.',
      'Ich verlasse mich hÃ¤ufig auf meine Intuition, wenn ich Entscheidungen treffe.',
      'Ich sehe Probleme eher als Chancen und MÃ¶glichkeiten zur VerÃ¤nderung.',
      'Ich bin offen fÃ¼r Risiken, wenn ich an eine neue Idee glaube.',
      'Brainstorming und kreatives Explorieren bereiten mir viel Freude.',
      'Ich sehe ZusammenhÃ¤nge zwischen scheinbar unverbundenen Dingen.',
      'Mich interessiert die Zukunft und wie Dinge sein kÃ¶nnten, nicht nur wie sie sind.',
      'Ich breche gerne aus gewohnten Denkmustern aus.',
      'KÃ¼nstlerischer oder gestalterischer Ausdruck liegt mir.',
    ]
  }
];

const likertValues = [1, 2, 3, 4, 5];

// Alle Fragen mit Quadrant-Referenz flach zusammenfÃ¼hren
const allQuestions = [];
sections.forEach((sec, si) => {
  sec.questions.forEach((q, qi) => {
    allQuestions.push({ text: q, si, qi, key: `${si}_${qi}` });
  });
});

// Fester Shuffle (seeded) damit Reihenfolge immer gleich aber gemischt ist
function seededShuffle(arr) {
  const a = [...arr];
  let seed = 42;
  function rand() { seed = (seed * 1664525 + 1013904223) & 0xffffffff; return (seed >>> 0) / 0xffffffff; }
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(rand() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
const shuffledQuestions = seededShuffle(allQuestions);

// Seiten Ã  8 Fragen
const PAGE_SIZE = 8;
const totalPages = Math.ceil(shuffledQuestions.length / PAGE_SIZE);
let answers = {};
let currentPage = 0;

function startAssessment() {
  document.getElementById('intro').style.display = 'none';
  document.getElementById('assessment').style.display = 'block';
  buildNav();
  renderPage();
}

function buildNav() {
  const nav = document.getElementById('sectionNav');
  nav.innerHTML = Array.from({length: totalPages}, (_, i) =>
    `<div class="nav-dot" id="dot-${i}"></div>`
  ).join('');
}

function updateNav() {
  Array.from({length: totalPages}, (_, i) => {
    const dot = document.getElementById(`dot-${i}`);
    if (!dot) return;
    if (i === currentPage) {
      dot.style.background = 'var(--accent)';
      dot.style.transform = 'scale(1.4)';
    } else if (isPageDone(i)) {
      dot.style.background = 'var(--B)';
      dot.style.transform = 'scale(1)';
    } else {
      dot.style.background = 'var(--border)';
      dot.style.transform = 'scale(1)';
    }
  });
}

function isPageDone(page) {
  const start = page * PAGE_SIZE;
  const end = Math.min(start + PAGE_SIZE, shuffledQuestions.length);
  for (let i = start; i < end; i++) {
    if (answers[shuffledQuestions[i].key] === undefined) return false;
  }
  return true;
}

function renderPage() {
  const totalQ = shuffledQuestions.length;
  const answeredQ = Object.keys(answers).length;
  document.getElementById('progressCount').textContent = `${answeredQ} / ${totalQ}`;
  document.getElementById('progressFill').style.width = `${(answeredQ / totalQ) * 100}%`;

  document.getElementById('btnPrev').style.visibility = currentPage === 0 ? 'hidden' : 'visible';
  const isLast = currentPage === totalPages - 1;
  document.getElementById('btnNext').textContent = isLast ? 'Auswertung anzeigen â†’' : 'Weiter â†’';

  const start = currentPage * PAGE_SIZE;
  const end = Math.min(start + PAGE_SIZE, shuffledQuestions.length);
  const pageQuestions = shuffledQuestions.slice(start, end);

  const container = document.getElementById('questionSection');
  container.classList.remove('fade-in');
  void container.offsetWidth;
  container.classList.add('fade-in');

  container.innerHTML = `
    <div class="section-header">
      <div class="section-badge" style="background:#f0f4ff;color:#555;border:1px solid #dde0ef">
        Seite ${currentPage + 1} von ${totalPages}
      </div>
      <div class="section-title" style="color:#111;">Beantworte intuitiv und spontan</div>
    </div>
    ${pageQuestions.map((q, idx) => `
      <div class="question-card">
        <div class="q-num">Frage ${start + idx + 1} von ${totalQ}</div>
        <div class="question-text">${q.text}</div>
        <div class="likert">
          ${likertValues.map((v, li) => `
            <input type="radio" name="qmix_${q.key}" id="rmix_${q.key}_${li}" value="${v}"
              ${answers[q.key] === v ? 'checked' : ''}
              onchange="recordAnswer('${q.key}', ${v})">
            <label for="rmix_${q.key}_${li}">${v}</label>
          `).join('')}
        </div>
        <div class="likert-labels">
          <span>Gar nicht</span>
          <span>Voll zutreffend</span>
        </div>
      </div>
    `).join('')}
  `;
  updateNav();
}

function recordAnswer(key, val) {
  answers[key] = val;
  const totalQ = shuffledQuestions.length;
  const answeredQ = Object.keys(answers).length;
  document.getElementById('progressCount').textContent = `${answeredQ} / ${totalQ}`;
  document.getElementById('progressFill').style.width = `${(answeredQ / totalQ) * 100}%`;
}

function scrollToTop() {
  // Funktioniert sowohl standalone als auch im iFrame
  try { window.scrollTo({top: 0, behavior: 'smooth'}); } catch(e) {}
  try { document.documentElement.scrollTo({top: 0, behavior: 'smooth'}); } catch(e) {}
  try { document.body.scrollTo({top: 0, behavior: 'smooth'}); } catch(e) {}
  try { window.parent.scrollTo({top: 0, behavior: 'smooth'}); } catch(e) {}
  // Fallback ohne smooth
  setTimeout(function() {
    try { window.scrollTo(0, 0); } catch(e) {}
    try { window.parent.scrollTo(0, 0); } catch(e) {}
  }, 50);
}

function nextSection() {
  if (!isPageDone(currentPage)) {
    alert('Bitte beantworte alle Fragen auf dieser Seite.');
    return;
  }
  if (currentPage < totalPages - 1) {
    currentPage++;
    renderPage();
    scrollToTop();
  } else {
    showResults();
    scrollToTop();
  }
}

function prevSection() {
  if (currentPage > 0) {
    currentPage--;
    renderPage();
    scrollToTop();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RESULTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function computeScores() {
  return sections.map((sec, si) => {
    const raw = sec.questions.reduce((sum, _, qi) => {
      return sum + (answers[`${si}_${qi}`] || 3);
    }, 0);
    const max = sec.questions.length * 5;
    const pct = Math.round((raw / max) * 100);
    return { id: sec.id, name: sec.name, color: sec.color, raw, pct };
  });
}

const profiles = {
  A: {
    label: 'Der Analytiker',
    profiltyp: 'Sehr starke PrÃ¤ferenz',
    persoenlicheMerkmale: ['Analytisch', 'Faktisch', 'Logisch', 'Mathematisch', 'Quantitativ', 'Rational', 'Kritisch'],
    arbeitsMerkmale: ['Analytisch arbeiten', 'Probleme lÃ¶sen', 'Finanzielle Aspekte', 'Technische Aspekte'],
    stÃ¤rken: 'Du denkst klar, logisch und faktenbasiert. Du liebst es, komplexe Probleme zu durchdringen, Zahlen zu analysieren und rationale Schlussfolgerungen zu ziehen. Dein Denken ist prÃ¤zise, kritisch und datengetrieben.',
    arbeit: 'Im Beruf glÃ¤nzt du bei analytischen Aufgaben, der LÃ¶sung technischer Probleme und dem Umgang mit Zahlen und Fakten. Du bevorzugst klare Evidenz und messbare Ergebnisse.',
    unterDruck: 'Unter Druck neigst du dazu, noch analytischer zu werden â€“ du suchst nach mehr Daten und Fakten, bevor du entscheidest. Du kannst dabei etwas distanzierter und weniger kommunikativ wirken.',
    entwicklung: 'Um ganzheitlicher zu denken, kÃ¶nnte es helfen, bewusst mehr auf Intuition und zwischenmenschliche Aspekte zu achten. Der Austausch mit Menschen aus dem C-Quadranten kann sehr bereichernd sein.',
    traits: ['Analytisch', 'Logisch', 'Faktenbasiert', 'PrÃ¤zise', 'Kritisch', 'Rational', 'Mathematisch']
  },
  B: {
    label: 'Der Organisator',
    profiltyp: 'Starke PrÃ¤ferenz',
    persoenlicheMerkmale: ['Detailliert', 'Dominierend', 'Konservativ', 'Kontrolliert', 'Sequenziell', 'Organisiert'],
    arbeitsMerkmale: ['Administrativ', 'Implementieren', 'Organisieren', 'Planen', 'Technische Aspekte'],
    stÃ¤rken: 'Du planst sorgfÃ¤ltig, arbeitest strukturiert und hÃ¤ltst dich konsequent an bewÃ¤hrte Prozesse. Deine VerlÃ¤sslichkeit und dein Sinn fÃ¼r Details machen dich zu einem unverzichtbaren Umsetzer.',
    arbeit: 'Du bist die Person, die sicherstellt, dass PlÃ¤ne auch wirklich umgesetzt werden. Du verwaltest Prozesse, hÃ¤ltst Fristen ein und sorgst fÃ¼r Ordnung und Struktur in Projekten.',
    unterDruck: 'Unter Druck wirst du noch strukturierter und kontrollierender. Du hÃ¤ltst dich stÃ¤rker an Regeln und PlÃ¤ne und kannst in stressigen Situationen weniger flexibel wirken.',
    entwicklung: 'Mehr Offenheit fÃ¼r neue, unerprobte Wege und spontane Ideen kann deine Wirkung deutlich verstÃ¤rken. Kreative Impulse aus dem D-Quadranten bereichern dein strukturiertes Denken.',
    traits: ['Strukturiert', 'ZuverlÃ¤ssig', 'Detailverliebt', 'PÃ¼nktlich', 'Systematisch', 'Konservativ']
  },
  C: {
    label: 'Der Kommunikator',
    profiltyp: 'Normale PrÃ¤ferenz',
    persoenlicheMerkmale: ['Emotional', 'Intuitiv', 'Musikalisch', 'Spirituell', 'Symbolisch', 'Verbal', 'EinfÃ¼hlsam'],
    arbeitsMerkmale: ['Ideen ausdrÃ¼cken', 'Schreiben', 'Unterrichten/Training', 'Zwischenmenschliche Aspekte'],
    stÃ¤rken: 'Du bist empathisch, kommunikativ und menschenorientiert. Du schaffst Vertrauen, fÃ¶rderst Teamzusammenhalt und bringst Menschen zusammen.',
    arbeit: 'In der Arbeit bist du stark in der Kommunikation, im Training und in allem was mit Menschen und Beziehungen zu tun hat. Du verstehst die emotionalen BedÃ¼rfnisse deiner Kollegen.',
    unterDruck: 'Unter Druck ziehst du dich mÃ¶glicherweise etwas zurÃ¼ck oder suchst verstÃ¤rkt sozialen RÃ¼ckhalt. Die emotionale Komponente kann unter Stress sowohl eine StÃ¤rke als auch eine Herausforderung sein.',
    entwicklung: 'Deine sozialen FÃ¤higkeiten sind wertvoll â€“ kombiniere sie bewusst mit analytischem Denken (A) fÃ¼r noch Ã¼berzeugendere Kommunikation mit faktenbasierten Argumenten.',
    traits: ['Empathisch', 'Kommunikativ', 'Teamorientiert', 'Kooperativ', 'Sozial', 'EinfÃ¼hlsam']
  },
  D: {
    label: 'Der VisionÃ¤r',
    profiltyp: 'Starke PrÃ¤ferenz',
    persoenlicheMerkmale: ['Ganzheitlich', 'Intuitiv', 'Kreativ', 'KÃ¼nstlerisch', 'RÃ¤umlich', 'Simultan', 'Aufbauend'],
    arbeitsMerkmale: ['Innovation', 'Integrieren', 'Konzipieren', 'Kreative Aspekte'],
    stÃ¤rken: 'Du denkst in groÃŸen ZusammenhÃ¤ngen, siehst Muster und Verbindungen wo andere sie nicht sehen, und hast ein ausgeprÃ¤gtes GespÃ¼r fÃ¼r ZukÃ¼nftiges und MÃ¶gliches.',
    arbeit: 'Du bringst innovative Ideen, verbindest scheinbar Unverbundenes und treibst konzeptionelles Denken voran. Du bist der Ideengeber und VisionÃ¤r im Team.',
    unterDruck: 'Unter Druck kann dein Denken noch sprunghafter und ganzheitlicher werden. Du siehst viele MÃ¶glichkeiten gleichzeitig, was manchmal Entscheidungen erschwert.',
    entwicklung: 'Kombiniere deine Visionen mit strukturierter Umsetzung (B-Quadrant) um Ideen wirklich in die RealitÃ¤t zu bringen. Deine StÃ¤rke liegt im Konzipieren â€“ suche dir starke Umsetzer als Partner.',
    traits: ['Kreativ', 'Intuitiv', 'Innovativ', 'VisionÃ¤r', 'Ganzheitlich', 'Risikofreudig']
  }
};

function showResults() {
  document.getElementById('assessment').style.display = 'none';
  const resultsEl = document.getElementById('results');
  resultsEl.style.display = 'block';

  const scores = computeScores();
  // Sort scores descending for preference order
  const sorted = [...scores].sort((a, b) => b.pct - a.pct);
  const dominant = sorted[0];
  const prof = profiles[dominant.id];

  // Preference order string e.g. "A > D > B > C"
  const prefOrder = sorted.map(s => s.id).join(' > ');

  // Score cards
  const sg = document.getElementById('scoreGrid');
  sg.innerHTML = scores.map(s => `
    <div class="score-card">
      <div class="score-card-top">
        <div class="score-label">
          <div class="score-dot" style="background:${s.color}"></div>
          ${s.id} â€“ ${s.name}
        </div>
        <div class="score-value" style="color:${s.color}">${s.pct}%</div>
      </div>
      <div class="score-bar-bg">
        <div class="score-bar-fill" style="width:${s.pct}%;background:${s.color}" id="bar-${s.id}"></div>
      </div>
      <div class="score-desc">${profiles[s.id].profiltyp}</div>
    </div>
  `).join('');

  // Quadrant map
  const qm = document.getElementById('quadrantMap');
  const quadOrder = [
    {si:3, pos:'top-left', label:'D â€“ Oben Rechts', bg:'rgba(144,48,192,0.08)'},
    {si:0, pos:'top-right', label:'A â€“ Oben Links', bg:'rgba(38,128,194,0.08)'},
    {si:2, pos:'bot-left', label:'C â€“ Unten Rechts', bg:'rgba(196,90,32,0.08)'},
    {si:1, pos:'bot-right', label:'B â€“ Unten Links', bg:'rgba(26,158,110,0.08)'},
  ];
  qm.innerHTML = quadOrder.map(q => {
    const s = scores[q.si];
    const sec = sections[q.si];
    const p = profiles[s.id];
    return `
    <div class="quadrant-box" style="background:${q.bg}">
      <div class="qbox-label" style="color:${s.color}">${q.label}</div>
      <div class="qbox-name" style="color:${s.color}">${sec.icon} ${p.label}</div>
      <div class="qbox-traits">${p.persoenlicheMerkmale.slice(0,4).join(' Â· ')}</div>
      <div class="qbox-score" style="color:${s.color}">${s.pct}%</div>
    </div>`;
  }).join('');

  // Detailed profile section
  const ps = document.getElementById('profileSection');
  ps.innerHTML = `
    <div class="profile-title">Dein ausfÃ¼hrliches Denkstil-Profil</div>

    <!-- Preference order -->
    <div style="background:#f0f4ff;border:1px solid #dde0ef;border-radius:10px;padding:1rem 1.3rem;margin-bottom:1.5rem;">
      <div style="font-size:0.78rem;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:#888;margin-bottom:0.4rem;">Deine PrÃ¤ferenz-Reihenfolge</div>
      <div style="display:flex;gap:0.5rem;align-items:center;flex-wrap:wrap;">
        ${sorted.map((s,i) => `
          <span style="background:${s.color};color:#fff;font-weight:700;padding:0.3rem 0.8rem;border-radius:6px;font-size:0.95rem;">${s.id}</span>
          ${i < sorted.length-1 ? '<span style="color:#aaa;font-weight:700;font-size:1.1rem;">â€º</span>' : ''}
        `).join('')}
      </div>
      <div style="font-size:0.82rem;color:#444;margin-top:0.5rem;">Dominantester Denkstil: <strong style="color:${dominant.color}">${dominant.id} â€“ ${dominant.name} (${dominant.pct}%)</strong></div>
    </div>

    <!-- Each quadrant detailed -->
    ${sorted.map((s, rank) => {
      const p = profiles[s.id];
      const sec = sections.find(sec => sec.id === s.id);
      const rankLabels = ['ğŸ¥‡ HÃ¶chste PrÃ¤ferenz', 'ğŸ¥ˆ Zweite PrÃ¤ferenz', 'ğŸ¥‰ Dritte PrÃ¤ferenz', '4ï¸âƒ£ Geringste PrÃ¤ferenz'];
      return `
      <div style="background:#fff;border:1px solid ${s.color}44;border-left:4px solid ${s.color};border-radius:12px;padding:1.4rem;margin-bottom:1.2rem;box-shadow:0 2px 8px rgba(0,0,0,0.05);">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:0.8rem;flex-wrap:wrap;gap:0.5rem;">
          <div style="display:flex;align-items:center;gap:0.7rem;">
            <span style="background:${s.color};color:#fff;font-weight:700;font-size:1.1rem;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;">${s.id}</span>
            <div>
              <div style="font-weight:700;font-size:1rem;color:#111;">${sec.icon} ${p.label}</div>
              <div style="font-size:0.75rem;color:${s.color};font-weight:600;">${rankLabels[rank]}</div>
            </div>
          </div>
          <div style="font-family:'DM Serif Display',serif;font-size:2rem;color:${s.color};font-weight:700;">${s.pct}%</div>
        </div>

        <div style="margin-bottom:0.8rem;">
          <div style="font-size:0.75rem;font-weight:700;text-transform:uppercase;letter-spacing:0.07em;color:#888;margin-bottom:0.3rem;">PersÃ¶nliche Merkmale</div>
          <div style="display:flex;flex-wrap:wrap;gap:0.4rem;">
            ${p.persoenlicheMerkmale.map(t => `<span style="background:${s.color}15;color:${s.color};border:1px solid ${s.color}40;padding:0.2rem 0.6rem;border-radius:5px;font-size:0.78rem;font-weight:600;">${t}</span>`).join('')}
          </div>
        </div>

        <div style="margin-bottom:0.8rem;">
          <div style="font-size:0.75rem;font-weight:700;text-transform:uppercase;letter-spacing:0.07em;color:#888;margin-bottom:0.3rem;">Merkmale der Arbeit</div>
          <div style="display:flex;flex-wrap:wrap;gap:0.4rem;">
            ${p.arbeitsMerkmale.map(t => `<span style="background:#f5f5f5;color:#444;border:1px solid #e0e0e0;padding:0.2rem 0.6rem;border-radius:5px;font-size:0.78rem;">${t}</span>`).join('')}
          </div>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;margin-top:0.8rem;">
          <div style="background:#f8f9fc;border-radius:8px;padding:0.8rem;">
            <div style="font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:#888;margin-bottom:0.3rem;">ğŸ’ª StÃ¤rken</div>
            <div style="font-size:0.82rem;color:#111;line-height:1.6;">${p.stÃ¤rken}</div>
          </div>
          <div style="background:#f8f9fc;border-radius:8px;padding:0.8rem;">
            <div style="font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:#888;margin-bottom:0.3rem;">ğŸ¢ Im Beruf</div>
            <div style="font-size:0.82rem;color:#111;line-height:1.6;">${p.arbeit}</div>
          </div>
          <div style="background:#fff8f0;border-radius:8px;padding:0.8rem;">
            <div style="font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:#888;margin-bottom:0.3rem;">âš¡ Unter Druck/Stress</div>
            <div style="font-size:0.82rem;color:#111;line-height:1.6;">${p.unterDruck}</div>
          </div>
          <div style="background:#f0fff8;border-radius:8px;padding:0.8rem;">
            <div style="font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.06em;color:#888;margin-bottom:0.3rem;">ğŸŒ± Entwicklungspotenzial</div>
            <div style="font-size:0.82rem;color:#111;line-height:1.6;">${p.entwicklung}</div>
          </div>
        </div>
      </div>`;
    }).join('')}
  `;

  // Draw spider after render
  requestAnimationFrame(() => drawSpider(scores));

  scrollToTop();
}

function drawSpider(scores) {
  const canvas = document.getElementById('spiderCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const cx = W / 2, cy = H / 2;
  const R = Math.min(W, H) * 0.38;
  ctx.clearRect(0, 0, W, H);

  const n = 4;
  const labels = scores.map(s => `${s.id}: ${s.name}`);
  const colors = scores.map(s => s.color);
  const values = scores.map(s => s.pct / 100);
  // Angle: top, right, bottom, left => rotate so A is top-right etc
  const angles = scores.map((_, i) => (i * 2 * Math.PI / n) - Math.PI / 2);

  // Draw grid rings
  for (let ring = 1; ring <= 5; ring++) {
    const r = (ring / 5) * R;
    ctx.beginPath();
    for (let i = 0; i < n; i++) {
      const x = cx + r * Math.cos(angles[i]);
      const y = cy + r * Math.sin(angles[i]);
      i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
    }
    ctx.closePath();
    ctx.strokeStyle = ring === 5 ? '#c0c8e0' : '#dde0ee';
    ctx.lineWidth = ring === 5 ? 1.5 : 1;
    ctx.stroke();
  }

  // Draw axis lines
  angles.forEach(a => {
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + R * Math.cos(a), cy + R * Math.sin(a));
    ctx.strokeStyle = '#dde0ee';
    ctx.lineWidth = 1;
    ctx.stroke();
  });

  // Ring value labels
  for (let ring = 1; ring <= 5; ring++) {
    const r = (ring / 5) * R;
    const val = ring * 20;
    ctx.fillStyle = '#aab0c8';
    ctx.font = '11px DM Sans, sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText(val + '%', cx + 4, cy - r + 14);
  }

  // Draw filled polygon
  ctx.beginPath();
  scores.forEach((s, i) => {
    const r = values[i] * R;
    const x = cx + r * Math.cos(angles[i]);
    const y = cy + r * Math.sin(angles[i]);
    i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
  });
  ctx.closePath();

  // Gradient fill
  const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, R);
  grad.addColorStop(0, 'rgba(38,128,194,0.25)');
  grad.addColorStop(1, 'rgba(144,48,192,0.08)');
  ctx.fillStyle = grad;
  ctx.fill();
  ctx.strokeStyle = '#2680c2';
  ctx.lineWidth = 2.5;
  ctx.stroke();

  // Draw data points
  scores.forEach((s, i) => {
    const r = values[i] * R;
    const x = cx + r * Math.cos(angles[i]);
    const y = cy + r * Math.sin(angles[i]);

    ctx.beginPath();
    ctx.arc(x, y, 7, 0, Math.PI * 2);
    ctx.fillStyle = colors[i];
    ctx.fill();
    ctx.strokeStyle = '#ffffff';
    ctx.lineWidth = 2;
    ctx.stroke();
  });

  // Draw labels
  scores.forEach((s, i) => {
    const labelR = R + 38;
    const x = cx + labelR * Math.cos(angles[i]);
    const y = cy + labelR * Math.sin(angles[i]);
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.font = 'bold 15px DM Sans, sans-serif';
    ctx.fillStyle = colors[i];
    ctx.fillText(s.id, x, y - 9);
    ctx.font = '13px DM Sans, sans-serif';
    ctx.fillStyle = '#111111';
    ctx.fillText(s.pct + '%', x, y + 9);
  });
}

function printResults() {
  // Set print date
  const now = new Date();
  const dateStr = now.toLocaleDateString('de-CH', { day:'2-digit', month:'long', year:'numeric' });
  document.getElementById('printDate').innerHTML = 
    'Datum: ' + dateStr + '<br>Denkstil-Assessment';

  // Show print header
  document.getElementById('printHeader').style.display = 'flex';

  // Wait for canvas to be ready, then print
  setTimeout(function() {
    window.print();
    // Hide print header again after
    setTimeout(function() {
      document.getElementById('printHeader').style.display = 'none';
    }, 1000);
  }, 300);
}

function restart() {
  answers = {};
  currentPage = 0;
  document.getElementById('results').style.display = 'none';
  document.getElementById('intro').style.display = 'block';
  scrollToTop();
}

// â”€â”€ Dynamische HÃ¶he fÃ¼r iFrame â”€â”€
function sendHeight() {
  var h = document.body.scrollHeight;
  window.parent.postMessage({ frameHeight: h }, '*');
}
// Beim Laden
window.addEventListener('load', sendHeight);
// Bei jeder GrÃ¶ÃŸenÃ¤nderung (z.B. wenn Ergebnisse erscheinen)
new MutationObserver(sendHeight).observe(document.body, { childList: true, subtree: true, attributes: true });
window.addEventListener('resize', sendHeight);
</script>
</body>
</html>
